# Use Python 3.11 slim as the base image
FROM python:3.11-slim

# Install system dependencies
RUN apt-get update && apt-get install -y \
    libsm6 libxext6 libxrender-dev \
    libgl1 \
    libgstreamer-plugins-base1.0-dev \
    libgstreamer1.0-dev \
    libgtk-3-dev \
    && rm -rf /var/lib/apt/lists/*

# Install required Python packages
RUN pip install --no-cache-dir \
    numpy \
    pandas \
    tensorflow \
    opencv-python \
    matplotlib \
    torch \
    torchvision \
    pillow \
    requests \
    redis \
    opencage \
    astunparse

# Copy your scripts into the container
COPY prepareDB.py /app/prepareDB.py
COPY setup_new_entries.py /app/setup_new_entries.py
COPY export_db.py /app/export_db.py
# Set the working directory to /app
WORKDIR /app

# Default command to run the script
#CMD ["python", "setup_new_entries.py"]
CMD ["python", "export_db.py"]
